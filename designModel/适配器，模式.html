<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<script>
/***
 * 适配器模式：解决两个软件实体间的接口不兼容的问题
 * 
 * 文件上传：之前接口只支持单文件上传，现在需要支持多文件上传
 * *****/

// 新老数据接口不匹配的问题，需要通过适配器去修改，不需要修改老接口；
 
 function cities() {
     return [{name:'1', id:1},{name:'2', id:2}]
 }
 var render = function(fn){
     console.log('渲染');
     document.write( JSON.stringify(fn()))
 }
 var adapterCities = function(oldFn){
     var oldA = oldFn();
     var a = {};
     for (let index = 0; index < oldA.length; index++) {
         a[oldA[index].name] = oldA[index].id
     }
     return function(){
         return a
     }
 }
 render(adapterCities(cities))

var mixin = function(sObj,tObj){
    // 原对象进行深拷贝
    var copyDeep = function(obj){
        var deep = {};
        for (var key in obj) {
            if (obj.hasOwnProperty(key)) {
                if(obj[key] && typeof obj[key] === 'object'){
                   deep[key]={}
                   deep[key] =  copyDeep(obj[key])
                }else{
                    deep[key] = obj[key]
                }
            }
        }
        return deep;
    }
    var sourceObj = copyDeep(sObj)
    for (var i in sourceObj) {
        if (!tObj.hasOwnProperty(i)) {
           tObj[i] = sourceObj[i]
        }
    }
   
}

</script>
    
</body>
</html>